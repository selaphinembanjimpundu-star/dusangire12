{% extends 'nutritionist_dashboard/base.html' %}
{% load static %}

{% block title %}Create Your Nutritionist Profile{% endblock %}

{% block dashboard_content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="text-center">
                <div class="mb-4">
                    <div class="badge bg-success bg-opacity-10 text-success rounded-pill px-3 py-2 mb-3">
                        <i class="bi bi-star me-2"></i> Welcome to Dusangire
                    </div>
                </div>
                <h1 class="display-5 fw-bold mb-2">Complete Your Professional Profile</h1>
                <p class="lead text-muted">Set up your nutritionist profile to start helping clients achieve their health goals</p>
            </div>
        </div>
    </div>

    <!-- Progress Indicator -->
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto">
            <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
                <div class="card-body p-4">
                    <h6 class="fw-bold mb-3">Profile Setup Progress</h6>
                    <div class="d-flex justify-content-between mb-3">
                        <small>Step 1: Basic Info</small>
                        <small>Step 2: Professional</small>
                        <small class="text-primary fw-bold">Step 3: Pricing</small>
                        <small>Step 4: Review</small>
                    </div>
                    <div class="progress" style="height: 8px;">
                        <div class="progress-bar bg-success" style="width: 75%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Form Section -->
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <form method="POST" enctype="multipart/form-data" id="profileForm" class="needs-validation" novalidate>
                {% csrf_token %}

                <!-- Error Messages -->
                {% if form.non_field_errors %}
                <div class="alert alert-danger alert-dismissible fade show rounded-4" role="alert">
                    <div class="d-flex align-items-start">
                        <i class="bi bi-exclamation-triangle me-3" style="font-size: 1.5rem;"></i>
                        <div>
                            <h6 class="alert-heading">Something went wrong</h6>
                            {% for error in form.non_field_errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endif %}

                <!-- Section 1: Basic Information -->
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
                    <div class="card-header bg-light border-bottom-0 p-4">
                        <h5 class="mb-0"><i class="bi bi-person-fill text-primary me-2"></i> Basic Information</h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="{{ form.first_name.id_for_label }}" class="form-label fw-bold">First Name</label>
                                {{ form.first_name }}
                                {% if form.first_name.errors %}
                                    <div class="invalid-feedback d-block">{{ form.first_name.errors.0 }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.last_name.id_for_label }}" class="form-label fw-bold">Last Name</label>
                                {{ form.last_name }}
                                {% if form.last_name.errors %}
                                    <div class="invalid-feedback d-block">{{ form.last_name.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="{{ form.profile_photo.id_for_label }}" class="form-label fw-bold">Professional Photo</label>
                            <div class="upload-area rounded-4 p-4 border-2 border-dashed text-center" style="border-color: #dee2e6; cursor: pointer;">
                                <i class="bi bi-cloud-upload" style="font-size: 2rem; color: #6c757d;"></i>
                                <p class="mt-3 mb-2 text-muted">Drag and drop or click to upload</p>
                                <small class="text-muted">JPG or PNG, max 5MB</small>
                                {{ form.profile_photo }}
                            </div>
                            {% if form.profile_photo.errors %}
                                <div class="invalid-feedback d-block mt-2">{{ form.profile_photo.errors.0 }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Section 2: Professional Information -->
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
                    <div class="card-header bg-light border-bottom-0 p-4">
                        <h5 class="mb-0"><i class="bi bi-award text-info me-2"></i> Professional Information</h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="mb-4">
                            <label for="{{ form.bio.id_for_label }}" class="form-label fw-bold">Professional Bio</label>
                            {{ form.bio }}
                            <small class="text-muted d-block mt-2">
                                <i class="bi bi-info-circle me-1"></i> Share your background, expertise, and approach to nutrition coaching
                            </small>
                            {% if form.bio.errors %}
                                <div class="invalid-feedback d-block mt-2">{{ form.bio.errors.0 }}</div>
                            {% endif %}
                        </div>

                        <div class="mb-4">
                            <label for="{{ form.specialization.id_for_label }}" class="form-label fw-bold">Specialization Areas</label>
                            {{ form.specialization }}
                            <small class="text-muted d-block mt-2">
                                <i class="bi bi-info-circle me-1"></i> Select areas where you specialize (you can add more later)
                            </small>
                            {% if form.specialization.errors %}
                                <div class="invalid-feedback d-block mt-2">{{ form.specialization.errors.0 }}</div>
                            {% endif %}
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="{{ form.qualifications.id_for_label }}" class="form-label fw-bold">Certifications & Qualifications</label>
                                {{ form.qualifications }}
                                <small class="text-muted d-block mt-2">e.g., RDN, RD, CSSD, ISSN-SNS</small>
                                {% if form.qualifications.errors %}
                                    <div class="invalid-feedback d-block mt-2">{{ form.qualifications.errors.0 }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.phone.id_for_label }}" class="form-label fw-bold">Phone Number</label>
                                {{ form.phone }}
                                <small class="text-muted d-block mt-2">Clients may use this to contact you</small>
                                {% if form.phone.errors %}
                                    <div class="invalid-feedback d-block mt-2">{{ form.phone.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Pricing & Rates -->
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
                    <div class="card-header bg-light border-bottom-0 p-4">
                        <h5 class="mb-0"><i class="bi bi-cash-circle text-success me-2"></i> Pricing & Rates</h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="mb-4">
                            <label for="{{ form.consultation_rate.id_for_label }}" class="form-label fw-bold">Consultation Rate</label>
                            <div class="input-group mb-2">
                                <span class="input-group-text rounded-start-3">$</span>
                                {{ form.consultation_rate }}
                                <span class="input-group-text rounded-end-3">per hour</span>
                            </div>
                            <small class="text-muted d-block">
                                <i class="bi bi-info-circle me-1"></i> Set your hourly rate for one-on-one consultations
                            </small>
                            {% if form.consultation_rate.errors %}
                                <div class="invalid-feedback d-block mt-2">{{ form.consultation_rate.errors.0 }}</div>
                            {% endif %}
                        </div>

                        <div class="alert alert-info alert-dismissible fade show rounded-3" role="alert">
                            <i class="bi bi-lightbulb me-2"></i>
                            <strong>Pricing Tip:</strong> Research market rates in your area and consider your experience level. You can always adjust rates later.
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    </div>
                </div>

                <!-- Terms & Conditions -->
                <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
                    <div class="card-body p-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="terms" required>
                            <label class="form-check-label" for="terms">
                                I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> and <a href="#" class="text-decoration-none">Privacy Policy</a>
                            </label>
                        </div>
                        <div class="invalid-feedback d-block">
                            You must agree to the terms and conditions.
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="row mb-5">
                    <div class="col-12">
                        <div class="d-flex gap-3 justify-content-center">
                            <a href="{% url 'nutritionist_dashboard:dashboard' %}" class="btn btn-outline-secondary rounded-3 px-5 py-2">
                                <i class="bi bi-arrow-left me-2"></i> Back
                            </a>
                            <button type="submit" class="btn btn-primary rounded-3 px-5 py-2 btn-lg">
                                <i class="bi bi-check-circle me-2"></i> Complete Profile Setup
                            </button>
                        </div>
                    </div>
                </div>
            </form>

            <!-- Info Card -->
            <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-4 text-center mb-3 mb-md-0">
                            <i class="bi bi-shield-check text-success" style="font-size: 2rem;"></i>
                            <h6 class="fw-bold mt-2">Secure</h6>
                            <small class="text-muted">Your data is encrypted</small>
                        </div>
                        <div class="col-md-4 text-center mb-3 mb-md-0">
                            <i class="bi bi-person-check text-info" style="font-size: 2rem;"></i>
                            <h6 class="fw-bold mt-2">Verified</h6>
                            <small class="text-muted">Professional credentials</small>
                        </div>
                        <div class="col-md-4 text-center">
                            <i class="bi bi-graph-up text-warning" style="font-size: 2rem;"></i>
                            <h6 class="fw-bold mt-2">Growth</h6>
                            <small class="text-muted">Build your client base</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .form-control, .form-select, textarea {
        border-radius: 0.75rem;
        border: 1px solid #dee2e6;
        padding: 0.75rem 1rem;
    }

    .form-control:focus, .form-select:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
    }

    .btn {
        border-radius: 0.75rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .upload-area:hover {
        background-color: #f8f9fa;
        border-color: #0d6efd !important;
    }

    .upload-area input[type="file"] {
        display: none;
    }

    .progress {
        border-radius: 0.5rem;
        background-color: #e9ecef;
    }
</style>
{% endblock %}
